services:
  - type: web
    name: telegram-finance-bot
    env: php
    plan: free
    buildCommand: |
      echo "ðŸ”¨ Instalando dependencias..." &&
      composer install --no-dev --optimize-autoloader &&
      echo "âœ… Dependencias instaladas"
    startCommand: php -S 0.0.0.0:$PORT index.php
    envVars:
      - key: BOT_TOKEN
        value: 8336253561:AAE1MoMaNHa2wRgGpKZK7HqajX049eSpyfs
      - key: BOT_USERNAME
        value: FinanceNewsGNewsBot
      - key: ADMIN_CHAT_ID
        value: 123456789  # Reemplaza con tu Chat ID real
      - key: RENDER_URL
        fromService:
          name: telegram-finance-bot
          type: web
          property: url

jobs:
  - type: cron
    name: daily-finance-news
    schedule: "0 9 * * *"  # 9:00 AM todos los dÃ­as (hora EST)
    startCommand: php cron-job.php
    plan: free
    envVars:
      - key: BOT_TOKEN
        fromService:
          name: telegram-finance-bot
          type: web
          envVarKey: BOT_TOKEN
      - key: BOT_USERNAME
        fromService:
          name: telegram-finance-bot
          type: web
          envVarKey: BOT_USERNAME